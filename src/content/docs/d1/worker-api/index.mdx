---
pcx_content_type: navigation
title: D1 Worker Binding API
sidebar:
  order: 4
---

import { DirectoryListing, Details, Steps } from "~/components";

You can execute queries on your D1 database through SQL query statements. To do this, you need to perform the following steps:

1. [Prepare a statement](/d1/worker-api/prepare-a-statement).
2. [Run the prepared statement](/d1/worker-api/run-a-statement).
3. Analyze the [return object](/d1/worker-api/return-object) (if necessary).

Refer to the relevant sections for the API documentation.

## Typescript support

D1 Worker Bindings API is fully-typed via the `@cloudflare/workers-types` package, and also supports [generic types](https://www.typescriptlang.org/docs/handbook/2/generics.html#generic-types) as part of its TypeScript API. A generic type allows you to provide an optional _type parameter_ so that a function understands the type of the data it is handling.

When using the [query statement methods](#query-statement-methods) `stmt.run()`, `stmt.raw()` and `stmt.first()`, you can provide a type representing each database row. D1's API will [return the result object](#return-object) with the correct type.

For example, providing an `OrderRow` type as a type parameter to `stmt.run()` will return a typed `Array<OrderRow>` object instead of the default `Record<string, unknown>` type:

```ts
// Row definition
type OrderRow = {
Id: string;
CustomerName: string;
OrderDate: number;
};

// Elsewhere in your application
const result = await env.MY_DB.prepare(
"SELECT Id, CustomerName, OrderDate FROM [Order] ORDER BY ShippedDate DESC LIMIT 100",
).run<OrderRow>();
```

## API playground

The D1 Worker Binding API playground is an `index.js` file where you can test each of the documented Worker Binding APIs for D1. The file builds from the end-state of the [Get started](/d1/get-started/#write-queries-within-your-worker) code.

You can use this alongside the API documentation to better understand how each API works.

Follow the steps to setup your API playground.

### 1. Complete the Get started tutorial

Complete the [Get started](/d1/get-started/#write-queries-within-your-worker) tutorial. Ensure you use JavaScript instead of TypeScript.

### 2. Modify the content of `index.js`

Replace the contents of your `index.js` file with the below to view the effect of each API.

<Details header="index.js" open={false}>
```js
export default {
  async fetch(request, env) {
    const { pathname } = new URL(request.url);

    const companyName1 = `Bs Beverages`;
    const companyName2 = `Around the Horn`;
    const stmt = env.DB.prepare(`SELECT * FROM Customers WHERE CompanyName = ?`);

    if (pathname === `/RUN`){
    const returnValue = await stmt.bind(companyName1).run()
    return Response.json(returnValue);

  } else if (pathname === `/RAW`){
    const returnValue = await stmt.bind(companyName1).raw();
    return Response.json(returnValue);

  } else if (pathname === `/FIRST`){
    const returnValue = await stmt.bind(companyName1).first();
    return Response.json(returnValue);

  } else if (pathname === `/BATCH`) {
    const batchResult = await env.DB.batch([
      stmt.bind(companyName1),
      stmt.bind(companyName2)
    ]);
    // const returnValue = await stmt.run();
    return Response.json(batchResult);
  }

    return new Response(
    `Welcome to the D1 API Playground!
		\nChange the URL to test the methods inside your index.js file.`,
    );
  },
  };

```
</Details>

### 3. Deploy the Worker

<Steps>
1. Navigate to your tutorial directory you created by following step 1.
2. Run `npx wrangler dev`.
	```sh
	npx wrangler dev
	```
	```sh output
	 ⛅️ wrangler 3.85.0 (update available 3.86.1)
	-------------------------------------------------------

	Your worker has access to the following bindings:
	- D1 Databases:
		- DB: <DATABASE_NAME> (DATABASE_ID) (local)
	⎔ Starting local server...
	[wrangler:inf] Ready on http://localhost:8787
	╭───────────────────────────╮
	│  [b] open a browser       │
	│  [d] open devtools        │
	│  [l] turn off local mode  │
	│  [c] clear console        │
	│  [x] to exit              │
	╰───────────────────────────╯
	```
3. Open a browser at the specified address.
</Steps>

### 4. Test the APIs

Change the URL to test the various D1 Worker Binding APIs.

